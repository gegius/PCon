# Оверлей для игр “PCon”


## Описание:

Система просмотра видео во время работы с десктопными приложениями, рассчитанная в первую очередь на аудиторию геймеров, с целью предоставления возможности потребления контента параллельно.

## Примеры пользователей:

1. Игрок в таймкиллер игры, который хочет чувствовать себя комфортнее, из-за эффекта присутствия, включает видео своего любимого блогера или видеогайд по своей любимой игре.

2. Программист, который параллельно с тем, что пишет код, смотрит Индийско-Английский гайд о том, как работает определенная технология.

3. Студент гуманитарного ВУЗа, который смотрит своего любимого стримера параллельно с написанием диплома в Word’е.


### Взаимодействие с программой:

После запуска программы пользователю требуется обновить соответствующей кнопкой список программ, запущенных на его компьютере, и выбрать те, к которым нужно цеплять оверлей, перенеся их тем самым в список захватываемых программ, после чего нажать кнопку запуска оверлея.
	Запустив приложение и открыл захватываемую программу, пользователю требуется запустить оверлей настроек сочетанием клавиш “ctrl + tab”, после чего выбрать нужный ему хостинг в левом углу экрана, и определиться с тем, будет ли он что-то искать или воспользоваться вкладкой Трендов соответствующего хостинга
	Когда оверлей настроек выдаст ему полученные результаты, пользователь может ознакомиться с описанием каждого или лишь с заголовком в названии кнопки соответствующего результата.
	После того как пользователь определится с выбором, он может нажать кнопку старт, тем самым закрыв оверлей настроек и открыл основной оверлей с проигрывающимся медиа пользователя. С ним он по возможности может взаимодействовать посредством кнопок: старт, пауза, громкость, перемотка. 



## Точки расширения: 
1. Добавление новых видеохостингов и новых методов поиска с помощью интерфейса IHosting
2. Добавление функционала/особых настроек плеера (размер, возможность перемотки, возможность ускорения) с помощью реализации интерфейса IPlayerSettings

### Диаграмма:

![photo_2021-06-23_09-25-55](https://user-images.githubusercontent.com/55377473/123035639-12301c80-d405-11eb-8cdb-850fb1897258.jpg)

Основной функционал и точка расширения предоставляется интерфейсом IHosting, обязывающий свои реализации использовать реализации интерфейса IPlayerSettings, реализовывать метод получения Uri по ссылке на видео соответствующего хостинга, поиск,  а также получение трендов хостинга. В проекте все хостинги реализуют свой функционал благодаря соответствующим API. Хостинги находятся в слое Application. В этом слое также находится класс MediaObject позволяет унифицировать данные, полученные от API разных хостингов.

В слое Domain находится интерфейс IPlayerSettings и его реализации, которые использует IHosting для передачи параметров настройки плеера. Также классы горячих клавишь: класс отвечающий за горячие клавиши windows и класс горячих клавиш wpd (WinHotKeys и WpfHotKeys соответственно).

В слое Infrastructure находятся такие классы как ProcessChecker, отлавливающий текущие процессы; WindowsInfo - ответственный за получение информации о закрепленном приложении; WindowSnapper, который и реализует технологию Overlay, закрепляя окна друг к другу; WinApi подключает нужные dll; LibVlcHelper, позволяющий получить правильный путь до библиотеки VLC, с плеером которой мы и работаем, а в случае её отвутствия разархивирует её в папку с нужной конфигурацией; ErrorHandler - класс обработки ошибок; И структура rect, которая помогает нам описывать экран.

## DI контейнер:
 Создается в классе App.cs, в методе OnStartup, задается начальная конфигурация в методе ConfigureServices. Пробрасывается через OverlaySettings.cs и Overlay.cs, где и используется.
 
